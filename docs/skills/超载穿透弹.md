# 超载穿透弹技能文档

## 技能基本信息
- **技能名称**: 超载穿透弹
- **技能类型**: 伤害类 + 控制类
- **冷却时间**: 3回合
- **技能描述**: 发射超载能量弹，造成巨额伤害并有概率麻痹目标

## 技能效果

### 伤害效果
- **基础伤害公式**: 基础伤害值 × 攻击系数
- **等级伤害值**:
  - 1级: 400点基础伤害
  - 2级: 450点基础伤害  
  - 3级: 500点基础伤害
  - 4级: 550点基础伤害
  - 5级: 600点基础伤害

### 控制效果
- **麻痹概率**: 30%
- **持续时间**: 1.5秒（向上取整为2回合）
- **效果描述**: 目标无法行动，持续2回合

## 实现代码位置

### 核心文件
- <mcfile name="skill_processor.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/battle/skill_processor.py"></mcfile>
  - 技能处理逻辑: <mcsymbol name="_process_overload_penetration" filename="skill_processor.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/battle/skill_processor.py" startline="415" type="function"></mcsymbol>
  - 技能识别: <mcsymbol name="process_skill" filename="skill_processor.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/battle/skill_processor.py" startline="60" type="function"></mcsymbol>

### 状态管理
- <mcfile name="status_manager.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/battle/status_manager.py"></mcfile>
  - 麻痹状态应用: <mcsymbol name="apply_status_effect" filename="status_manager.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/battle/status_manager.py" startline="35" type="function"></mcsymbol>
  - 状态更新: <mcsymbol name="update_hero_status" filename="status_manager.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/battle/status_manager.py" startline="60" type="function"></mcsymbol>

### 英雄状态
- <mcfile name="hero.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/core/hero.py"></mcfile>
  - 麻痹状态属性: <mcsymbol name="__init__" filename="hero.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/core/hero.py" startline="20" type="function"></mcsymbol>
  - 行动限制: <mcsymbol name="attack_target" filename="hero.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/core/hero.py" startline="107" type="function"></mcsymbol>
  - 技能限制: <mcsymbol name="use_skill" filename="hero.py" path="/Users/diaoyuzhe/Desktop/模拟战斗/core/hero.py" startline="250" type="function"></mcsymbol>

## 使用示例

```python
# 技能数据格式
overload_skill = {
    'name': '超载穿透弹',
    'description': '发射超载能量弹，造成巨额伤害并有概率麻痹目标',
    'cooldown': 3,
    'skill_type': '1',
    'level_values': {
        1: 400,  # 1级基础伤害
        2: 450,  # 2级基础伤害
        3: 500,  # 3级基础伤害
        4: 550,  # 4级基础伤害
        5: 600   # 5级基础伤害
    }
}

# 使用技能
result = SkillProcessor.process_skill(attacker, overload_skill, target, attacker.name, target.name)
```

## 测试验证

已通过自动化测试验证以下功能：
- ✅ 基础伤害值正确传递（2000点）
- ✅ 攻击公式正确计算最终伤害
- ✅ 30%麻痹概率正常触发
- ✅ 麻痹状态正确限制目标行动
- ✅ 2回合后麻痹状态自动解除
- ✅ 不同等级伤害值正确

## 注意事项

1. **伤害计算**: 实际伤害 = 基础伤害 × (攻击力 / 防御力系数) × 暴击系数
2. **概率机制**: 麻痹触发使用30%固定概率，不受抗性影响
3. **持续时间**: 1.5秒向上取整为2回合（每回合0.75秒）
4. **状态优先级**: 麻痹状态与其他控制状态（冻结、眩晕）互斥

## 扩展建议

1. 可添加麻痹抗性机制
2. 可支持麻痹概率随技能等级提升
3. 可添加麻痹状态的特殊视觉效果
4. 可支持麻痹状态下的特殊交互（如受到额外伤害）